<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/playidx.css" />
<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<%- include('../partials/nav') %>

<main>
  <h1 class="h1pidx"><%= title %></h1>
  <table>
    <thead>
      <tr class="table-head">
        <th></th>
        <th>Title</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <% playlists.forEach(playlist => { %> 
        <tr>
          <td class="avatar"><button type="button" class="btn btn-secondary" id="username" data-bs-toggle="tooltip" data-bs-placement="left" title="<%= playlist.owner.name%>"><img src="<%= playlist.owner.avatar %>"></button></td>
          <td><%= playlist.name %></td>
          <td><%= playlist.description %></td>
          <td><a href="/playlists/<%= playlist._id %>" id="details">Details</a></td>
          <td>
            <% if (playlist.owner.equals(user?.profile._id)) { %>
            <form action="/playlists/<%= playlist._id %>?_method=DELETE"method="POST">
              <button id="delete">X</button>
            </form>
            <% } %>
          </td>
        </tr>
        <% }) %>
    </tbody>
  </table>
</main>

<%- include('../partials/footer') %>